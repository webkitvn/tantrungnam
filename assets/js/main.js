(()=>{var b=document.querySelector("#masthead").offsetHeight;document.querySelector("html").style.setProperty("--header-height",b+"px");document.addEventListener("DOMContentLoaded",()=>{let t={mobileBreakpoint:768,scrollOffset:"30%",navContainer:".page-nav",sectionSelector:".page-section",activeClass:"active"},d=()=>window.innerWidth<=t.mobileBreakpoint,m=e=>e?e.replace(/-/g," ").replace(/\b\w/g,l=>l.toUpperCase()).trim():"",g=(e,l)=>{let s;return function(...o){let c=()=>{s=null,e.apply(this,o)};clearTimeout(s),s=setTimeout(c,l)}},h=()=>typeof window.Waypoint>"u"?(console.warn("CWP Navigation: Waypoints library not found. Navigation will not work."),!1):document.querySelector(t.navContainer)?document.querySelectorAll(t.sectionSelector).length===0?(console.warn("CWP Navigation: No sections found."),!1):!0:(console.warn("CWP Navigation: Navigation container not found."),!1),f=()=>{if(d()){console.log("CWP Navigation: Disabled on mobile for UI optimization.");return}if(!h())return;let e=document.querySelector(t.navContainer),l=document.querySelectorAll(t.sectionSelector);e.innerHTML="",l.forEach(r=>{let o=r.getAttribute("id");if(!o){console.warn("CWP Navigation: Section without ID found, skipping.");return}let c=m(o),i=document.createElement("li");i.setAttribute("data-menuanchor",o),i.setAttribute("role","menuitem");let n=document.createElement("a");n.setAttribute("href",`#${o}`),n.textContent=c,n.setAttribute("aria-label",`Navigate to ${c}`),n.setAttribute("role","button"),i.appendChild(n),e.appendChild(i)});let s=e.querySelector("li:first-child");s&&s.classList.add(t.activeClass),l.forEach(r=>{new Waypoint({element:r,handler:function(o){let c=this.element,i=c.getAttribute("id"),n=e.querySelector(`li[data-menuanchor="${i}"]`);if(e.querySelectorAll("li").forEach(a=>{a.classList.remove(t.activeClass)}),o==="down")n&&n.classList.add(t.activeClass);else{let a=Array.from(document.querySelectorAll(t.sectionSelector)),v=a.indexOf(c);if(v>0){let S=a[v-1].getAttribute("id"),p=e.querySelector(`li[data-menuanchor="${S}"]`);p&&p.classList.add(t.activeClass)}else{let u=e.querySelector("li:first-child");u&&u.classList.add(t.activeClass)}}},offset:t.scrollOffset})}),y(e),console.log("CWP Navigation: Initialized successfully.")},y=e=>{e.querySelectorAll("a").forEach(s=>{s.addEventListener("keydown",r=>{let o=r.target,c=o.parentElement,i=Array.from(e.querySelectorAll("li")),n=i.indexOf(c);switch(r.which){case 38:if(r.preventDefault(),n>0){let a=i[n-1].querySelector("a");a&&a.focus()}break;case 40:if(r.preventDefault(),n<i.length-1){let a=i[n+1].querySelector("a");a&&a.focus()}break;case 13:case 32:r.preventDefault(),o.click();break}})})},w=g(()=>{let e=document.querySelector(t.navContainer);e&&(d()?e.innerHTML="":f())},250);f(),window.addEventListener("resize",w)});})();
